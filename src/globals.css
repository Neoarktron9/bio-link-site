@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-background text-foreground font-fira-code overflow-hidden transition-all duration-300 ease-in-out;
  }

  /* Custom theme classes will be applied directly to body via ThemeContext */
  .theme-matrix {
    @apply bg-matrix-bg text-matrix-output;
    --prompt-color: theme('colors.matrix-prompt');
    --input-color: theme('colors.matrix-input');
    --header-color: theme('colors.matrix-header');
    --link-color: theme('colors.matrix-link');
    --link-hover-color: theme('colors.matrix-link-hover');
    --shadow-color: theme('colors.matrix-shadow');
    --container-bg: theme('colors.matrix-container-bg');
    --container-border: 1px solid theme('colors.matrix-container-border');
    --window-header-bg: theme('colors.matrix-window-header-bg');
    --window-header-text: theme('colors.matrix-window-header-text');
  }

  .theme-dracula {
    @apply bg-dracula-bg text-dracula-output;
    --prompt-color: theme('colors.dracula-prompt');
    --input-color: theme('colors.dracula-input');
    --header-color: theme('colors.dracula-header');
    --link-color: theme('colors.dracula-link');
    --link-hover-color: theme('colors.dracula-link-hover');
    --shadow-color: theme('colors.dracula-shadow');
    --container-bg: theme('colors.dracula-container-bg');
    --container-border: 1px solid theme('colors.dracula-container-border');
    --window-header-bg: theme('colors.dracula-window-header-bg');
    --window-header-text: theme('colors.dracula-window-header-text');
  }

  .theme-nord {
    @apply bg-nord-bg text-nord-output;
    --prompt-color: theme('colors.nord-prompt');
    --input-color: theme('colors.nord-input');
    --header-color: theme('colors.nord-header');
    --link-color: theme('colors.nord-link');
    --link-hover-color: theme('colors.nord-link-hover');
    --shadow-color: theme('colors.nord-shadow');
    --container-bg: theme('colors.nord-container-bg');
    --container-border: 1px solid theme('colors.nord-container-border');
    --window-header-bg: theme('colors.nord-window-header-bg');
    --window-header-text: theme('colors.nord-window-header-text');
  }

  .theme-solarized-light {
    @apply bg-solarized-light-bg text-solarized-light-output;
    --prompt-color: theme('colors.solarized-light-prompt');
    --input-color: theme('colors.solarized-light-input');
    --header-color: theme('colors.solarized-light-header');
    --link-color: theme('colors.solarized-light-link');
    --link-hover-color: theme('colors.solarized-light-link-hover');
    --shadow-color: theme('colors.solarized-light-shadow');
    --container-bg: theme('colors.solarized-light-container-bg');
    --container-border: 1px solid theme('colors.solarized-light-container-border');
    --window-header-bg: theme('colors.solarized-light-window-header-bg');
    --window-header-text: theme('colors.solarized-light-window-header-text');
  }

  .theme-cyberpunk {
    @apply bg-cyberpunk-bg text-cyberpunk-output;
    --prompt-color: theme('colors.cyberpunk-prompt');
    --input-color: theme('colors.cyberpunk-input');
    --header-color: theme('colors.cyberpunk-header');
    --link-color: theme('colors.cyberpunk-link');
    --link-hover-color: theme('colors.cyberpunk-link-hover');
    --shadow-color: theme('colors.cyberpunk-shadow');
    --container-bg: theme('colors.cyberpunk-container-bg');
    --container-border: 1px solid theme('colors.cyberpunk-container-border');
    --window-header-bg: theme('colors.cyberpunk-window-header-bg');
    --window-header-text: theme('colors.cyberpunk-window-header-text');
  }

  .theme-retro {
    @apply bg-retro-bg text-retro-output font-press-start-2p;
    --prompt-color: theme('colors.retro-prompt');
    --input-color: theme('colors.retro-input');
    --header-color: theme('colors.retro-header');
    --link-color: theme('colors.retro-link');
    --link-hover-color: theme('colors.retro-link-hover');
    --shadow-color: theme('colors.retro-shadow');
    --container-bg: theme('colors.retro-container-bg');
    --container-border: 1px solid theme('colors.retro-container-border');
    --window-header-bg: theme('colors.retro-window-header-bg');
    --window-header-text: theme('colors.retro-window-header-text');
  }

  .theme-vaporwave {
    @apply bg-vaporwave-bg text-vaporwave-output;
    --prompt-color: theme('colors.vaporwave-prompt');
    --input-color: theme('colors.vaporwave-input');
    --header-color: theme('colors.vaporwave-header');
    --link-color: theme('colors.vaporwave-link');
    --link-hover-color: theme('colors.vaporwave-link-hover');
    --shadow-color: theme('colors.vaporwave-shadow');
    --container-bg: theme('colors.vaporwave-container-bg');
    --container-border: 1px solid theme('colors.vaporwave-container-border');
    --window-header-bg: theme('colors.vaporwave-window-header-bg');
    --window-header-text: theme('colors.vaporwave-window-header-text');
  }

  /* Layout classes */
  .layout-terminal #output-wrapper,
  .layout-minimal #output-wrapper {
    @apply flex flex-col h-full;
  }

  .layout-centered #output-wrapper {
    @apply flex flex-col h-full justify-center items-center p-4;
  }

  .layout-centered #terminal-output {
    @apply h-[90vh] max-h-[800px] bg-[var(--container-bg)] backdrop-blur-md border-[var(--container-border)] rounded-lg animate-fade;
  }

  /* Multipanel Layout */
  .layout-multipanel #output-wrapper {
    @apply flex flex-col h-full; /* Ensure output-wrapper takes full height */
  }
  .layout-multipanel #input-line {
    @apply hidden; /* Hide the main input line as it's handled within MultiPanelLayout */
  }
  #multipanel-container {
    @apply flex flex-col md:flex-row w-full h-full p-4 gap-4 pointer-events-auto;
  }
  #multipanel-static {
    @apply w-full md:w-2/5 border-[var(--container-border)] p-4 rounded-lg bg-[var(--container-bg)] overflow-y-auto flex-shrink-0 shadow-[0_0_5px_var(--shadow-color)];
  }
  #multipanel-terminal {
    @apply w-full md:w-3/5 border-[var(--container-border)] rounded-lg bg-[var(--container-bg)] overflow-y-auto flex flex-col shadow-[0_0_5px_var(--shadow-color)];
  }

  /* Logstream Layout */
  .layout-logstream #output-wrapper {
    @apply flex flex-col h-full;
  }
  .layout-logstream #input-line {
    @apply hidden;
  }
  #logstream-container {
    @apply flex flex-col w-full h-full p-4 pointer-events-auto;
  }
  #logstream-output {
    @apply flex-grow overflow-y-auto border-[var(--container-border)] rounded-lg bg-[var(--container-bg)] p-4 mb-4 shadow-[0_0_5px_var(--shadow-color)];
  }

  /* Grid Layout */
  .layout-grid #output-wrapper {
    @apply flex flex-col h-full;
  }
  .layout-grid #input-line {
    @apply hidden;
  }
  #grid-container {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-4 h-full overflow-y-auto pointer-events-auto;
  }
  .grid-tile {
    @apply block bg-[var(--container-bg)] border-[var(--container-border)] p-6 rounded-lg text-center transition-transform duration-200 ease-in-out hover:scale-105 shadow-[0_0_5px_var(--shadow-color)];
  }

  /* Desktop Layout */
  .layout-desktop #output-wrapper {
    @apply flex flex-col h-full;
  }
  .layout-desktop #input-line {
    @apply hidden; /* Input is handled within the DesktopWindow */
  }
  #desktop-container {
    @apply relative w-full h-full flex flex-col items-center justify-center p-4 pointer-events-auto;
  }
  #desktop-dock {
    @apply absolute bottom-4 flex space-x-4 p-3 bg-[var(--container-bg)] border-[var(--container-border)] rounded-full shadow-[0_0_10px_var(--shadow-color)];
  }


  /* General terminal styling */
  .terminal-line {
    @apply mb-2 leading-normal;
  }

  .prompt-text {
    @apply text-[var(--prompt-color)];
  }

  .header-text {
    @apply text-[var(--header-color)] font-bold mb-2;
  }

  a {
    @apply no-underline text-[var(--link-color)] hover:text-[var(--link-hover-color)];
  }

  .cursor {
    @apply inline-block w-[0.6em] h-[1.2em] bg-[var(--input-color)] animate-blink ml-[0.2em];
  }

  /* Scrollbar styling */
  #terminal-output::-webkit-scrollbar {
    @apply w-1.5;
  }
  #terminal-output::-webkit-scrollbar-track {
    @apply bg-transparent;
  }
  #terminal-output::-webkit-scrollbar-thumb {
    @apply bg-[var(--prompt-color)];
  }
}